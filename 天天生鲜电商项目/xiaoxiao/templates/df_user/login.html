{% extends "df_user/basefoot.html" %}
{% block head %}
    <script src="/static/js/jquery.cookie.js"></script>
    <script>
        $(function(){
            var user_error = false;
            var pwd_error = false;
            if($(".user_error").html()!=''){
                $(".user_error").show();
                user_error = true;
            }
            if($(".pwd_error").html()!=''){
                $(".pwd_error").show()
                pwd_error = true;
            }
            if ($.cookie("username")!=""){
                $("#username").val($.cookie("username"))
            }
            $('#username').blur(function () {
                checkusername();
            }).focus(function () {
                $(".user_error").hide()
            })
            $('#pwd').blur(function () {
                checkpassword();
            }).focus(function () {
                $(".pwd_error").hide() ;
            })
            $('#sub').click(function () {
                checkusername();
                checkpassword();
                if (user_error || pwd_error){
                    return
                }
            })
            function checkusername() {
                var usrname = $('#username').val()
                if (username.length ==0){
                    $(".user_error").html('请输入账号').show() ;
                    user_error =true;
                }else{
                    user_error = false;
                     $(".user_error").hide()
                }
            }
            function checkpassword() {
                var pwdnum = $('#pwd').val().length;
                if (8<=pwdnum && pwdnum<=20 ){
                    pwd_error = false;
                    $(".pwd_error").hide();
                }else{
                    $(".pwd_error").html('请输入8到20的位密码').show();
                    pwd_error =true;
                }
            }

        })
    </script>
{% endblock head %}
{% block body %}
	<div class="login_top clearfix">
		<a href="index.html" class="login_logo"><img src="/static/images/logo02.png"></a>
	</div>

	<div class="login_form_bg">
		<div class="login_form_wrap clearfix">
			<div class="login_banner fl"></div>
			<div class="slogan fl">日夜兼程 · 急速送达</div>
			<div class="login_form fr">
				<div class="login_title clearfix">
					<h1>用户登录</h1>
					<a href="#">立即注册</a>
				</div>
				<div class="form_input">
					<form action="/user/login_handle" method="post">
                        {% csrf_token %}
						<input type="text" name="username" id="username" class="name_input" placeholder="请输入用户名">
{#						<div class="user_error">输入错误</div>#}
						<div class="user_error">{{user_error}}</div>
						<input type="password" name="pwd" id="pwd" class="pass_input" placeholder="请输入密码">
{#						<div class="pwd_error">输入错误</div>#}
						<div class="pwd_error">{{pwd_error}}</div>
						<div class="more_input clearfix">
							<input type="checkbox" name="remembername" value="1">
							<label>记住用户名</label>
							<a href="#">忘记密码</a>
						</div>
						<input type="submit" id="sub" value="登录" class="input_submit">
					</form>
				</div>
			</div>
		</div>
	</div>
{% endblock body %}